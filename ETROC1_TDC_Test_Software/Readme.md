## 1. These python scripts are used for testing the ETROC1 TDC chip
  - The **command\_interpret.py** file is a class for sockect communication
  - The **kc705\_mig\_control.py** file includes all kinds of functions such as I2C write/read, DDR3 data storage, Ethernet communication.

## 2. Hardware platform
  - The FPGA is Xilinx KC705 EVB and the FPGA socket address is 192.168.2.x, The x is configurable via switch (DIP switch SW11 positions 1 and 2 control the value of `x`, the positions 1 and 2 are **ON**, `x=3`, the position 1 is **ON** and the position 2 is **OFF**, `x=1`, and so forth) and its value ranges from 0 to 3 and the port number is fixed to 1024. [Schematic of KC705 EVB](https://www.xilinx.com/support/documentation/boards_and_kits/kc705_Schematic_xtp132_rev1_1.pdf)
  ```verilog
	hostname = '192.168.2.3'			#FPGA IP address
	port = 1024					#port number
  ```
  - KC750 EVB Picture is shown as below:
  ![KC705 EVB Picture](https://github.com/weizhangccnu/Python_Script/blob/master/ETROC1_TDC_Test_Software/Img/KC705_EVB.png)
  - The python scripts can be executed both on Windows and Linux operating system.
  - Between the PC and KC705 EVB is connected by Ethernet cable. 
  - I2C interface mapping is shown as below figure.
  ![I2C interface Mapping](https://github.com/weizhangccnu/Python_Script/blob/master/ETROC1_TDC_Test_Software/Img/I2C_Interface_Mapping.png)
  - Ethernet communication speed is 1Gbps, Please make sure that the Ethernet cable can meet the requirements.

## 3. Software version
  - Firmware was synthesized and implemented on Vivado 2016.2
  - Python version: **python3.7.5** and The python scripts are all executed on **Atom IDE** with terminal package. You can choose other IDE for python according to your habits.
  - Before you execute the above python scripts, you should make sure that all the modules imported at the begin of each python file have already been installed. Otherwise, you must install all used modules with the command of `pip install modulename`

## 4. FPGA GTX reference clock configuration
  - The GTX reference clock is generated by Si5338 clock generator and its frequency is **160 MHz**. The GTX is not sensitive to the ploarity of reference clock.
  - The Si5338 EVB is configured by ClockBuilder Pro v.2.37.0.1 [ClockBuilder Pro download link](https://www.silabs.com/products/development-tools/software/clockbuilder-pro-software)
  - [Si5338-EVB User's Guide](https://www.silabs.com/documents/public/user-guides/Si5338-EVB.pdf)

## 5. Test Procedures
**1.** Download `kc705_mig.bit` file into FPGA.
  - [kc705_mig.bit file link](https://www.baidu.com)
  - FPGA configuration mode: DIP switch SW13 positions 3, 4, and 5 control which configuration mode is used at power-up or when the PROG pushbutton is pressed. the SW13 should be set as shown the below figure.
  ![FPGA Configuration mode](https://github.com/weizhangccnu/Python_Script/blob/master/ETROC1_TDC_Test_Software/Img/FPGA_Configuration_mode.png)
**2.** Verify Ethernet communiction is correct.
  - Open windows doc terminal and using `ping` command to verify the Ethernet communication is correct or not.
  ``` python
	ping 192.168.2.3
  ```

